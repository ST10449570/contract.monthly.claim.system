@model contract.monthly.claim.system.Models.MonthlyClaim

@{
    ViewData["Title"] = "Submit New Claim";
}

<h2 class="text-primary mb-4">Submit a New Claim</h2>

<form asp-action="Create" method="post" enctype="multipart/form-data">

    <div class="mb-3">
        <label asp-for="LecturerId" class="form-label"></label>
        <input asp-for="LecturerId" class="form-control" />
        <span asp-validation-for="LecturerId" class="text-danger"></span>
    </div>

    <div class="mb-3">
        <label asp-for="Hours" class="form-label">Hours Worked</label>
        <input asp-for="Hours" class="form-control" id="HoursWorked" oninput="calculateTotal()" />
        <span asp-validation-for="Hours" class="text-danger"></span>
    </div>

    <div class="mb-3">
        <label asp-for="HourlyRate" class="form-label">Hourly Rate</label>
        <input asp-for="HourlyRate" class="form-control" id="HourlyRate" oninput="calculateTotal()" />
        <span asp-validation-for="HourlyRate" class="text-danger"></span>
    </div>

    <div class="mb-3">
        <label class="form-label fw-bold">Total Amount:</label>
        <p id="TotalAmountDisplay" class="form-control bg-light">R 0.00</p>
    </div>

    <div class="mb-3">
        <label asp-for="Notes" class="form-label"></label>
        <textarea asp-for="Notes" class="form-control"></textarea>
        <span asp-validation-for="Notes" class="text-danger"></span>
    </div>

    <div class="mb-3">
        <label class="form-label">Upload Supporting Document</label>
        <input type="file" name="Document" class="form-control" />
    </div>

    <button type="submit" class="btn btn-primary">Submit Claim</button>

</form>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}

<script>
    function calculateTotal() {
        let hours = parseFloat(document.getElementById("HoursWorked").value) || 0;
        let rate = parseFloat(document.getElementById("HourlyRate").value) || 0;

        let total = hours * rate;

        document.getElementById("TotalAmountDisplay").innerText =
            "R " + total.toFixed(2);
    }
</script>
